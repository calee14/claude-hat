Generate a Python route discovery script for web application reconnaissance.

Target: {target_url}

Your script must:

1. **Intelligently spider the application** starting from the base URL
2. **Discover all routes** by:
   - Following HTML links (a[href], link[href])
   - Parsing script tags for API endpoint patterns
   - Checking common paths (/api/*, /admin/*, /_next/*)
   - Finding form actions
   - Detecting AJAX/fetch() calls in JavaScript

3. **Prevent infinite loops**:
   - Maintain a visited URLs set
   - Normalize URLs (remove fragments, sort query params)
   - Max depth limit (default: 3 levels)
   - Per-request timeout (5 seconds)
   - Overall script timeout (60 seconds)
   - Skip external domains

4. **Extract useful data**:
   - HTTP methods supported (OPTIONS request)
   - Query parameters in URLs
   - Form fields and their types
   - Cookies set by the application
   - Response headers (X-Powered-By, Server, etc.)

5. **Output clean JSON** with discovered attack surface

The script should be robust, handle errors gracefully, and never crash on 404s or timeouts.
